import type { Metadata } from "next";
import { notFound } from "next/navigation";
import { FeaturePage, FeatureSection, FeatureCard } from "@/app/components/landing/feature-page";
import { featurePages, ALL_FEATURE_SLUGS, type FeatureSlug, type FeaturePageContent } from "@/app/lib/i18n/feature-translations";

const AR_FAQS: Record<string, { q: string; a: string }[]> = {
  "smart-ai": [
    { q: "\u0634\u0648 \u0646\u0645\u0627\u0630\u062C \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064A \u0627\u0644\u0644\u064A \u064A\u0633\u062A\u062E\u062F\u0645\u0647\u0627 \u063A\u0627\u0644\u064A\u061F", a: "\u063A\u0627\u0644\u064A \u064A\u0633\u062A\u062E\u062F\u0645 Google Gemini \u0644\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0633\u0631\u064A\u0639\u0629\u060C \u0648Anthropic Claude \u0644\u0644\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0639\u0645\u064A\u0642\u060C \u0648OpenAI \u2014 \u0648\u064A\u062E\u062A\u0627\u0631 \u0627\u0644\u0623\u0641\u0636\u0644 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B." },
    { q: "\u0647\u0644 \u0623\u062D\u062A\u0627\u062C \u0623\u062E\u062A\u0627\u0631 \u0627\u0644\u0646\u0645\u0648\u0630\u062C\u061F", a: "\u0644\u0627. \u063A\u0627\u0644\u064A \u064A\u062E\u062A\u0627\u0631 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B. 85% \u0645\u0646 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u064A\u062A\u0639\u0627\u0645\u0644 \u0645\u0639\u0647\u0627 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0633\u0631\u064A\u0639\u060C \u0648\u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u0639\u0642\u062F\u0629 \u062A\u0646\u062A\u0642\u0644 \u0644\u0646\u0645\u0627\u0630\u062C \u0623\u0642\u0648\u0649." },
  ],
  "zero-friction": [
    { q: "\u0647\u0644 \u0623\u062D\u062A\u0627\u062C \u062A\u062D\u0645\u064A\u0644 \u062A\u0637\u0628\u064A\u0642\u061F", a: "\u0644\u0627. \u063A\u0627\u0644\u064A \u064A\u0639\u0645\u0644 \u0628\u0627\u0644\u0643\u0627\u0645\u0644 \u0639\u0628\u0631 \u0648\u0627\u062A\u0633\u0627\u0628. \u0628\u0633 \u0627\u0631\u0633\u0644 \u0631\u0633\u0627\u0644\u0629 \u0644\u0644\u0631\u0642\u0645 +971 58 289 6090." },
    { q: "\u0647\u0644 \u063A\u0627\u0644\u064A \u0645\u062C\u0627\u0646\u064A\u061F", a: "\u0646\u0639\u0645. \u0627\u0644\u062E\u0637\u0629 \u0627\u0644\u0645\u062C\u0627\u0646\u064A\u0629 \u062A\u0639\u0637\u064A\u0643 60 \u0631\u0633\u0627\u0644\u0629 \u0643\u0644 \u0634\u0647\u0631. \u0628\u062F\u0648\u0646 \u0628\u0637\u0627\u0642\u0629 \u0627\u0626\u062A\u0645\u0627\u0646." },
  ],
  "personal-memory": [
    { q: "\u0634\u0648 \u064A\u062A\u0630\u0643\u0631 \u063A\u0627\u0644\u064A \u0639\u0646\u064A\u061F", a: "\u063A\u0627\u0644\u064A \u064A\u062A\u0630\u0643\u0631 \u062A\u0641\u0636\u064A\u0644\u0627\u062A\u0643\u060C \u0623\u0633\u0644\u0648\u0628 \u062A\u0648\u0627\u0635\u0644\u0643\u060C \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0647\u0645\u0629\u060C \u0648\u0633\u064A\u0627\u0642 \u0627\u0644\u0645\u062D\u0627\u062F\u062B\u0627\u062A \u0627\u0644\u0633\u0627\u0628\u0642\u0629." },
    { q: "\u0623\u0642\u062F\u0631 \u0623\u0645\u0633\u062D \u0630\u0627\u0643\u0631\u0629 \u063A\u0627\u0644\u064A\u061F", a: "\u0646\u0639\u0645. \u0627\u0631\u0633\u0644 \"\u0627\u0645\u0633\u062D \u0643\u0644 \u0634\u064A\" \u0648\u0631\u0627\u062D \u064A\u0646\u0645\u0633\u062D \u0643\u0644 \u0634\u064A \u2014 \u0627\u0644\u0630\u0627\u0643\u0631\u0629\u060C \u0627\u0644\u0645\u0644\u0641\u0627\u062A\u060C \u0648\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0645\u062D\u0627\u062F\u062B\u0627\u062A." },
  ],
  "privacy": [
    { q: "\u0647\u0644 \u063A\u0627\u0644\u064A \u064A\u0628\u064A\u0639 \u0628\u064A\u0627\u0646\u0627\u062A\u064A\u061F", a: "\u0644\u0627. \u0645\u0627 \u0646\u0628\u064A\u0639 \u0648\u0644\u0627 \u0646\u0634\u0627\u0631\u0643 \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629 \u0623\u0628\u062F\u0627\u064B." },
    { q: "\u0623\u0642\u062F\u0631 \u0623\u0645\u0633\u062D \u0643\u0644 \u0628\u064A\u0627\u0646\u0627\u062A\u064A\u061F", a: "\u0646\u0639\u0645. \u0627\u0631\u0633\u0644 \"\u0627\u0645\u0633\u062D \u0643\u0644 \u0634\u064A\" \u0648\u0643\u0644 \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u062A\u0646\u0645\u0633\u062D \u0646\u0647\u0627\u0626\u064A\u0627\u064B." },
  ],
  "understand-anything": [
    { q: "\u0634\u0648 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0648\u0633\u0627\u0626\u0637 \u0627\u0644\u0644\u064A \u064A\u0641\u0647\u0645\u0647\u0627 \u063A\u0627\u0644\u064A\u061F", a: "\u063A\u0627\u0644\u064A \u064A\u0641\u0647\u0645 \u0627\u0644\u0635\u0648\u0631\u060C \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0635\u0648\u062A\u064A\u0629\u060C \u0627\u0644\u0641\u064A\u062F\u064A\u0648\u060C \u0627\u0644\u0645\u0644\u0641\u0627\u062A \u0627\u0644\u0635\u0648\u062A\u064A\u0629\u060C \u0648\u0645\u0633\u062A\u0646\u062F\u0627\u062A PDF." },
    { q: "\u064A\u0642\u062F\u0631 \u064A\u0641\u0647\u0645 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0635\u0648\u062A\u064A\u0629\u061F", a: "\u0646\u0639\u0645. \u0627\u0631\u0633\u0644 \u0631\u0633\u0627\u0644\u0629 \u0635\u0648\u062A\u064A\u0629 \u0648\u063A\u0627\u0644\u064A \u064A\u0641\u0647\u0645 \u0627\u0644\u0645\u062D\u062A\u0648\u0649 \u0648\u064A\u0631\u062F \u0639\u0644\u064A\u0647." },
  ],
  "image-generation": [
    { q: "\u0643\u064A\u0641 \u0623\u0646\u0634\u0626 \u0635\u0648\u0631\u0629 \u0628\u063A\u0627\u0644\u064A\u061F", a: "\u0628\u0633 \u0648\u0635\u0651\u0641 \u0627\u0644\u0644\u064A \u062A\u0628\u064A\u0647 \u0641\u064A \u0631\u0633\u0627\u0644\u0629. \u0645\u062B\u0644\u0627\u064B: \"\u0627\u0631\u0633\u0645 \u063A\u0631\u0648\u0628 \u0634\u0645\u0633 \u0641\u0648\u0642 \u0645\u0631\u0633\u0649 \u062F\u0628\u064A.\" \u063A\u0627\u0644\u064A \u064A\u0646\u0634\u0626 \u0648\u064A\u0631\u0633\u0644 \u0627\u0644\u0635\u0648\u0631\u0629 \u0639\u0644\u0649 \u0648\u0627\u062A\u0633\u0627\u0628." },
    { q: "\u0634\u0648 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0635\u0648\u0631 \u0627\u0644\u0644\u064A \u064A\u0642\u062F\u0631 \u064A\u0646\u0634\u0626\u0647\u0627\u061F", a: "\u0641\u0646\u060C \u0631\u0633\u0648\u0645\u060C \u0634\u0639\u0627\u0631\u0627\u062A\u060C \u062A\u0635\u0627\u0645\u064A\u0645 \u0633\u0648\u0634\u064A\u0627\u0644 \u0645\u064A\u062F\u064A\u0627\u060C \u0645\u0648\u0627\u062F \u062A\u0633\u0648\u064A\u0642\u064A\u0629\u060C \u0648\u0623\u0643\u062B\u0631." },
  ],
  "documents": [
    { q: "\u0634\u0648 \u0635\u064A\u063A \u0627\u0644\u0645\u0644\u0641\u0627\u062A \u0627\u0644\u0645\u062F\u0639\u0648\u0645\u0629\u061F", a: "PDF \u0648\u0635\u0648\u0631 \u0645\u0628\u0627\u0634\u0631\u0629. \u0645\u0644\u0641\u0627\u062A Word \u0648PowerPoint \u0648Excel \u062A\u062A\u062D\u0648\u0644 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0644\u0640 PDF \u062B\u0645 \u062A\u064F\u062D\u0644\u0651\u0644." },
    { q: "\u064A\u062A\u0630\u0643\u0631 \u063A\u0627\u0644\u064A \u0645\u0633\u062A\u0646\u062F\u0627\u062A\u064A \u0627\u0644\u0633\u0627\u0628\u0642\u0629\u061F", a: "\u0646\u0639\u0645. \u0627\u0644\u0645\u0633\u062A\u0646\u062F\u0627\u062A \u062A\u064F\u062D\u0641\u0638 \u0641\u064A \u0642\u0627\u0639\u062F\u0629 \u0645\u0639\u0631\u0641\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629 \u0648\u062A\u0642\u062F\u0631 \u062A\u0633\u0623\u0644 \u0639\u0646\u0647\u0627 \u0644\u0627\u062D\u0642\u0627\u064B." },
  ],
  "scheduled-tasks": [
    { q: "\u0634\u0648 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0644\u064A \u0623\u0642\u062F\u0631 \u0623\u062C\u062F\u0648\u0644\u0647\u0627\u061F", a: "\u0645\u0644\u062E\u0635\u0627\u062A \u0635\u0628\u0627\u062D\u064A\u0629\u060C \u062A\u0630\u0643\u064A\u0631\u0627\u062A\u060C \u062A\u0642\u0627\u0631\u064A\u0631 \u062F\u0648\u0631\u064A\u0629\u060C \u0623\u062D\u062F\u0627\u062B \u0627\u0644\u0637\u0642\u0633\u060C \u0648\u0645\u0644\u062E\u0635\u0627\u062A \u0623\u062E\u0628\u0627\u0631." },
    { q: "\u0623\u0642\u062F\u0631 \u0623\u0644\u063A\u064A \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u062C\u062F\u0648\u0644\u0629\u061F", a: "\u0646\u0639\u0645. \u0627\u0631\u0633\u0644 \"\u0627\u0645\u0633\u062D \u0627\u0644\u062C\u062F\u0627\u0648\u0644\" \u0644\u0625\u0644\u063A\u0627\u0621 \u0643\u0644 \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u062C\u062F\u0648\u0644\u0629." },
  ],
  "track-everything": [
    { q: "\u0634\u0648 \u0623\u0642\u062F\u0631 \u0623\u062A\u0627\u0628\u0639 \u0628\u063A\u0627\u0644\u064A\u061F", a: "\u0645\u0635\u0627\u0631\u064A\u0641\u060C \u0645\u0647\u0627\u0645\u060C \u062C\u0647\u0627\u062A \u0627\u062A\u0635\u0627\u0644\u060C \u0645\u0644\u0627\u062D\u0638\u0627\u062A\u060C \u0625\u0634\u0627\u0631\u0627\u062A \u0645\u0631\u062C\u0639\u064A\u0629\u060C \u0648\u0639\u0627\u062F\u0627\u062A \u2014 \u0643\u0644\u0647\u0627 \u0628\u0643\u0644\u0627\u0645 \u0637\u0628\u064A\u0639\u064A." },
    { q: "\u0643\u064A\u0641 \u0623\u0628\u062D\u062B \u0641\u064A \u0628\u064A\u0627\u0646\u0627\u062A\u064A\u061F", a: "\u0628\u0633 \u0627\u0633\u0623\u0644 \u0628\u0634\u0643\u0644 \u0637\u0628\u064A\u0639\u064A. \"\u0634\u0648 \u0635\u0631\u0641\u062A \u0639\u0644\u0649 \u0627\u0644\u0623\u0643\u0644 \u0647\u0627\u0644\u0623\u0633\u0628\u0648\u0639\" \u064A\u0634\u062A\u063A\u0644 \u062D\u062A\u0649 \u0644\u0648 \u0633\u0645\u064A\u062A\u0647\u0627 \"\u063A\u062F\u0627\" \u0623\u0648 \"\u0639\u0634\u0627\"." },
  ],
  "prowrite": [
    { q: "\u0634\u0648 \u0647\u0648 ProWrite\u061F", a: "\u0645\u064A\u0632\u0629 \u0627\u0644\u0643\u062A\u0627\u0628\u0629 \u0627\u0644\u0627\u062D\u062A\u0631\u0627\u0641\u064A\u0629 \u0641\u064A \u063A\u0627\u0644\u064A. \u0642\u0648\u0644 \"prowrite\" \u0645\u0639 \u0645\u0648\u0636\u0648\u0639\u0643 \u06488 \u0646\u0645\u0627\u0630\u062C \u0630\u0643\u0627\u0621 \u0627\u0635\u0637\u0646\u0627\u0639\u064A \u062A\u0628\u062D\u062B \u0648\u062A\u0643\u062A\u0628 \u0648\u062A\u0635\u0642\u0644 \u0645\u062D\u062A\u0648\u0627\u0643." },
    { q: "\u0634\u0648 \u0623\u0642\u062F\u0631 \u0623\u0643\u062A\u0628 \u0628\u0640 ProWrite\u061F", a: "\u0645\u0642\u0627\u0644\u0627\u062A\u060C \u0625\u064A\u0645\u064A\u0644\u0627\u062A\u060C \u0639\u0631\u0648\u0636\u060C \u062A\u0642\u0627\u0631\u064A\u0631\u060C \u0645\u062D\u062A\u0648\u0649 \u0633\u0648\u0634\u064A\u0627\u0644 \u0645\u064A\u062F\u064A\u0627\u060C \u0648\u0643\u062A\u0627\u0628\u0629 \u0625\u0628\u062F\u0627\u0639\u064A\u0629." },
  ],
  "open-source": [
    { q: "\u063A\u0627\u0644\u064A \u0641\u0639\u0644\u0627\u064B \u0645\u0641\u062A\u0648\u062D \u0627\u0644\u0645\u0635\u062F\u0631\u061F", a: "\u0646\u0639\u0645. \u0643\u0648\u062F \u063A\u0627\u0644\u064A \u0627\u0644\u0643\u0627\u0645\u0644 \u0645\u062A\u0627\u062D \u0639\u0644\u0649 GitHub \u062A\u062D\u062A \u062A\u0631\u062E\u064A\u0635 Apache 2.0." },
    { q: "\u0648\u064A\u0646 \u0627\u0644\u0643\u0648\u062F\u061F", a: "\u0639\u0644\u0649 github.com/ZenGardenDubai/ghali-ai-assistant \u2014 \u0627\u0644\u0643\u0648\u062F \u0627\u0644\u0643\u0627\u0645\u0644 \u0645\u062A\u0627\u062D \u0644\u0644\u062C\u0645\u064A\u0639." },
  ],
};

interface Props {
  params: Promise<{ slug: string }>;
}

export function generateStaticParams() {
  return ALL_FEATURE_SLUGS.map((slug) => ({ slug }));
}

export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const { slug } = await params;
  const page = featurePages[slug as FeatureSlug];
  if (!page) return {};
  const content: FeaturePageContent = page.ar;

  return {
    title: content.metaTitle,
    description: content.metaDescription,
    alternates: {
      canonical: `https://ghali.ae/ar/features/${slug}`,
      languages: {
        en: `https://ghali.ae/features/${slug}`,
        ar: `https://ghali.ae/ar/features/${slug}`,
        "x-default": `https://ghali.ae/features/${slug}`,
      },
    },
    openGraph: {
      title: `${content.metaTitle} \u2014 \u063A\u0627\u0644\u064A`,
      description: content.metaDescription,
      url: `https://ghali.ae/ar/features/${slug}`,
      locale: "ar_AE",
      images: [{ url: "/ghali-logo-with-bg.png", width: 640, height: 640, alt: "\u063A\u0627\u0644\u064A" }],
    },
    twitter: {
      card: "summary_large_image",
      title: `${content.metaTitle} \u2014 \u063A\u0627\u0644\u064A`,
      description: content.metaDescription,
      images: ["/ghali-logo-with-bg.png"],
    },
  };
}

export default async function ArFeaturePage({ params }: Props) {
  const { slug } = await params;
  const page = featurePages[slug as FeatureSlug];
  if (!page) notFound();

  const content: FeaturePageContent = page.ar;

  const faqs = AR_FAQS[slug] ?? [];
  const pageJsonLd = {
    "@context": "https://schema.org",
    "@graph": [
      {
        "@type": "BreadcrumbList",
        itemListElement: [
          { "@type": "ListItem", position: 1, name: "\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629", item: "https://ghali.ae/ar" },
          { "@type": "ListItem", position: 2, name: "\u0627\u0644\u0645\u0632\u0627\u064A\u0627", item: "https://ghali.ae/ar/features" },
          { "@type": "ListItem", position: 3, name: content.breadcrumb, item: `https://ghali.ae/ar/features/${slug}` },
        ],
      },
      ...(faqs.length > 0
        ? [
            {
              "@type": "FAQPage",
              mainEntity: faqs.map((f) => ({
                "@type": "Question",
                name: f.q,
                acceptedAnswer: { "@type": "Answer", text: f.a },
              })),
            },
          ]
        : []),
    ],
  };

  return (
    <FeaturePage
      jsonLd={pageJsonLd}
      slug={slug}
      alternateLocaleHref={`/features/${slug}`}
      badge={content.badge}
      title={
        <>
          {content.title} <span className="text-[#ED6B23]">{content.titleHighlight}</span>
        </>
      }
      subtitle={content.subtitle}
      locale="ar"
    >
      {content.sections.map((section, i) => {
        if (section.githubButton) {
          return (
            <div key={i} className="mt-8 text-center">
              <a
                href="https://github.com/ZenGardenDubai/ghali-ai-assistant"
                target="_blank"
                rel="noopener noreferrer"
                className="inline-flex items-center gap-3 rounded-full border border-white/10 px-8 py-4 text-lg font-medium transition-all hover:border-[#ED6B23]/40 hover:bg-[#ED6B23]/10 hover:text-[#ED6B23]"
              >
                {"\u0634\u0648\u0641 \u0639\u0644\u0649 GitHub"} &larr;
              </a>
            </div>
          );
        }

        return (
          <FeatureSection key={i} title={section.title}>
            {section.paragraphs?.map((p, j) => <p key={j}>{p}</p>)}

            {section.cards && (
              <div className={`grid gap-4 ${section.cards.length === 3 ? "sm:grid-cols-3" : "sm:grid-cols-2"}`}>
                {section.cards.map((card) => (
                  <FeatureCard key={card.title} icon={card.icon} title={card.title} description={card.description} />
                ))}
              </div>
            )}

            {section.listItems && (
              <ul className="space-y-2">
                {section.listItems.map((item, j) => (
                  <li key={j} className="flex items-start gap-2">
                    <span className="mt-1 text-[#ED6B23]">&bull;</span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            )}

            {section.infoBox && (
              <div className="rounded-xl border border-[#ED6B23]/20 bg-[#ED6B23]/5 p-6 text-sm text-white/60">
                {section.infoBox}
              </div>
            )}
          </FeatureSection>
        );
      })}
    </FeaturePage>
  );
}
